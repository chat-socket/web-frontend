<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Waiting...</title>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/oidc-client-ts@2.2.0/dist/browser/oidc-client-ts.min.js"></script>
    <script>
        var configuration = JSON.parse(window.localStorage.getItem('oauthConf'));
        var webStorage = new oidc.WebStorageStateStore({ store: window.localStorage });

        var mgr = new oidc.UserManager({userStore: webStorage, ...configuration});
        mgr.signinRedirectCallback().then(function (user) {
            mgr.storeUser(user).then(() => {
                window.location.href = '/';
            })
        }).catch(function (err) {
            console.log(err);
        })
    </script>
</body>
</html>